<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>sdaz</title><link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style"></head><body><table style="text-align: left; width: 100%; height: 100%;" border="0" cellspacing="0" cellpadding="6"><tbody><tr><td style="text-align: right; background-color: rgb(200, 200, 200);"></td><td class="navGlobal"><font class="navGlobal"><a href="siteIndex.html">Index</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="bibliography.html">Bibliography</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated by&nbsp;<a href="about/about.html">SiteGen V1.0</a></font></td></tr><tr><td style="text-align: right;  background-color: rgb(0, 0, 0);"><center><img src="logo.gif"/></center></td><td style="height: 100px; vertical-align: bottom; background-color: rgb(255, 255, 100); white-space: nowrap;"><font class="pageTitle">sdaz</font><br><font class="pageDescription">Implements speed dependent automatic zooming</font><br><br></td></tr><tr><td class="navTitle"><font class="sectionTitle">Navigation</font></td><td style="vertical-align: top;"><font class="sectionTitle">Document</font></td></tr><tr><td class="navPath"><br><font class="navPrevious"><a href="index.html">VGLViewer</a></font><br><img src="downArrow.gif"/><br><font class="navPrevious"><a href="page1.html">Implementation</a></font><br><img src="downArrow.gif"/><br><font class="navCurrent">sdaz</font></td><td style = "vertical-align: top;"><br><br><font class="normalText"><div style="margin-left: 40px;"><a href="#Package_sdaz">Package sdaz</a></div><div style="margin-left: 40px;"><a href="#Future_Work">Future Work</a></div></font><br><br><font class="titleText"><a name="Package_sdaz">Package sdaz</a></font><p><table width="800"><tr><td><font class="normalText">
Package sdaz implements no-frills, speed-dependent automatic zooming (SDAZ) navigation of documents. Classes in this package are shown below.
</font></td></tr></table><p><table width="800"><tr><td><font class="normalText">
SDAZSubject defines the contract for a zoomable document view. This interface defines methods
</font></td></tr></table><p><table width="800"><tr><td><ol><li><font class="normalText">getViewport and setViewport, to access the current document view's viewport,</font></li><li><font class="normalText">getWindow and setWindow, to access physical device window to which the viewport maps</font></li><li><font class="normalText">setIndicator, to update a graphical device to indicate the state of zooming in the document view, and</font></li><li><font class="normalText">update, to cue the document view to render the next frame.</font></li></ol></td></tr></table><p><table width="800"><tr><td><font class="normalText">
A SDAZDriver controls a SDAZSubject. This class has methods
</font></td></tr></table><p><table width="800"><tr><td><ol><li><font class="normalText">notifyMouseDown, notifyMouseDragged and notifyMouseReleased notify it when the mouse is dragged, down or released, respectively, and</font></li><li><font class="normalText">update, to cue the driver to continue with whatever it's doing for the next frame.</font></li></ol></td></tr></table><br><br><center><img src="figure4.gif"/><br><font class="normalText">Figure 4. Classes implementing speed-dependent automatic zooming</font></center><br><p><table width="800"><tr><td><font class="normalText">
A SDAZDriver has three states:
</font></td></tr></table><p><table width="800"><tr><td><ol><li><font class="normalText">Dormant, in which it is waiting for mouse down notification,</font></li><li><font class="normalText">Zooming, in which it is zooming the SDAZSubject viewport and zoom indicator to effect zooming, and</font></li><li><font class="normalText">Restoring, in which it is restoring the viewport to it's original size, at the center of it's current location.</font></li></ol></td></tr></table><p><table width="800"><tr><td><font class="normalText">
These states are shown in this state diagram, which shows the mouse events which cause transitions:
</font></td></tr></table><br><br><center><img src="figure5.gif"/><br><font class="normalText">Figure 5. SDAZ States</font></center><br><p><table width="800"><tr><td><font class="normalText">
SDAZState declares an abstract base class common to these states. These states are implemented by SDAZDormant, SDAZZooming and SDAZRestoring. A SDAZDriver maintains an instance of one of these subclasses at any given time to represent the current state of zooming and delegates all directions to it. The subclasses themselves are responsible for for returing an instance of the subclass corresponding to the next state after a transition. For example, the mouseDown method of SDAZDormant will return an instance of SDAZZooming. The mouseReleased method of SDAZZooming will return an instance of SDAZRestoring.
</font></td></tr></table><p><table width="800"><tr><td><font class="normalText">
Let's take a closer look at the behaviour of SDAZDriver. Starting out in the Dormant state, it has an instance of SDAZDormant. If we call its mouseDown method, it delegates the request to SDAZDormant, which returns a fresh SDAZZooming, initialised with the SDAZDrivers SDAZSubject and the position of the mouse. On initialisation, SDAZZooming records the current SDAZViewport of the SDAZSubject (labelled 'initial' in the class diagram) and awaits directions. If we then call SDAZDrivers mouseDragged method, it delegates the request to the SDAZZooming, which then records the mouse drag offset and calls its update method and returns the result. The update method computes a new SDAZViewport for the SDAZSubject, the size of which is proportional to the mouse drag offset. The update method also calls the SDAZSubjects setIndicator method with new SDAZ indicator parameters, and calculates a new SDAZViewport to restore the SDAZSubject to when zooming stops (labelled 'restore target' in the class diagram).
</font></td></tr></table><p><table width="800"><tr><td><font class="normalText">
Zooming stops when we then call SDAZDrivers mouseReleased method. SDAZDriver delegates this to the SDAZZooming mouseReleased method, which then returns a fresh instance of SDAZRestoring. The SDAZRestoring is initialised with the SDAZSubject, the current SDAZViewport of the SDAZSubject ('initial'), and the SDAZViewport to restore the SDAZSubject to ('target'). The job of the SDAZRestoring is to interpolate the SDAZSubjects SDAZViewport, incrementally with each call to its update method, from the 'initial' to the 'target' viewport, while at the same time updating the SDAZSubjects SDAZ indicator. While it is interpolating, the update method will return a reference to the SDAZRestoring, but when it it is finished, a call to this method will obtain a fresh SDAZDormant.
</font></td></tr></table><br><br><br><font class="titleText"><a name="Future_Work">Future Work</a></font><p><table width="800"><tr><td><font class="normalText">
SDAZDriver implements straight-forward no-frills SDAZ. Further work could include 
</font></td></tr></table><p><table width="800"><tr><td><ol><li><font class="normalText">the ability to transition back to Zooming at any instant while Restoring,</font></li><li><font class="normalText">a threshold mouse drag rate above which SDAZ kicks in,</font></li><li><font class="normalText">a delay after a change of drag direction before which SDAZ changes the zoom level, to alleviate the disorientating, fast zoom-in-zoom-out that results,</font></li><li><font class="normalText">the ability to configure parameters such as these.</font></li></ol></td></tr></table><br><br><br><font class = "subCats"><br></font></td></tr></tbody></table><br></body></html>